# ai-sudo daemon configuration
#
# Drop-in overrides: place *.toml files in conf.d/ next to this file
# (e.g. /etc/aisudo/conf.d/99-local.toml). They are merged alphabetically.
# Scalar values are replaced; allowlist entries are appended and deduplicated.

# Path to the Unix socket for PAM module communication
socket_path = "/var/run/aisudo/aisudo.sock"

# Path to the SQLite database
db_path = "/var/lib/aisudo/aisudo.db"

# HTTP API bind address (used only if http_enable_not_recommended = true)
# http_bind = "127.0.0.1:7654"

# Enable the unauthenticated HTTP API. Disabled by default because it has
# no authentication â€” any local process can approve/deny requests.
# http_enable_not_recommended = false

# Default timeout for approval requests (seconds)
timeout_seconds = 60

# Hot-reload config on each incoming connection (checks file modification times).
# Only per-connection values are reloaded: allowlist, timeout_seconds, max_stdin_bytes.
# Structural values (socket_path, db_path, http_bind) and notification settings
# are set at startup and require a restart.
hot_reload = false

# Commands that are auto-approved without notification.
# Matching is prefix-based: "apt list" matches "apt list --installed".
allowlist = [
    # "systemctl status",
    # "apt list",
]

# Stdin size limits and temp rule settings
[limits]
# Maximum stdin payload size in bytes (default: 10 MB)
# max_stdin_bytes = 10485760
# Stdin preview size in Telegram notifications (default: 2048 bytes)
# stdin_preview_bytes = 2048
# Maximum duration for temporary rules (default: 86400 = 24 hours)
# max_temp_rule_duration_seconds = 86400

[telegram]
# Create a bot via @BotFather on Telegram and paste the token here.
bot_token = "123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11"

# Your Telegram chat ID. Send /start to @userinfobot to find yours.
chat_id = 123456789

# Long-poll timeout for Telegram getUpdates (seconds)
poll_timeout_seconds = 30
